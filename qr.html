<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VisualWave v2.0 (Animated QR)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- QRious for high-performance Canvas QR -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <!-- jsQR for scanning -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <!-- LZ-String for compression -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        
        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: #0f172a; /* Slate 950 */
            color: #e2e8f0;
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.36);
        }
        .scan-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border: 2px solid rgba(6, 182, 212, 0.5);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.2);
            pointer-events: none;
        }
        .scan-line {
            width: 100%; height: 2px; background: #06b6d4;
            position: absolute; top: 0;
            animation: scan 2s linear infinite;
            box-shadow: 0 0 4px #06b6d4;
        }
        @keyframes scan {
            0% { top: 10%; opacity: 0; }
            50% { opacity: 1; }
            90% { top: 90%; opacity: 0; }
        }
        /* Hide scrollbar */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
        
        /* Canvas Styling */
        #qr-canvas {
            background: white;
            border: 4px solid white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Header -->
    <header class="mb-6 text-center z-10">
        <div class="flex items-center justify-center gap-2 mb-1">
            <i data-lucide="waves" class="w-6 h-6 text-cyan-400"></i>
            <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-500">VisualWave v2</h1>
        </div>
        <p class="text-slate-500 text-xs">High-Density Animated QR Protocol</p>
    </header>

    <!-- App Container -->
    <main class="w-full max-w-md glass-panel rounded-2xl relative overflow-hidden transition-all duration-300 min-h-[500px] flex flex-col">
        
        <!-- === VIEW: ROLE SELECTION === -->
        <div id="view-home" class="p-6 flex-1 flex flex-col justify-center space-y-6">
            <div class="text-center space-y-2">
                <h2 class="text-xl font-bold text-white">Start Transfer</h2>
                <p class="text-slate-400 text-sm">No internet required. Peer-to-Peer.</p>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <button onclick="startSender()" class="group p-6 rounded-xl bg-slate-800/50 hover:bg-slate-700/80 border border-slate-700 hover:border-cyan-400 transition-all">
                    <div class="w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform">
                        <i data-lucide="upload" class="text-cyan-400"></i>
                    </div>
                    <span class="font-bold block text-center text-sm">Send</span>
                </button>
                <button onclick="startReceiver()" class="group p-6 rounded-xl bg-slate-800/50 hover:bg-slate-700/80 border border-slate-700 hover:border-green-400 transition-all">
                    <div class="w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform">
                        <i data-lucide="download" class="text-green-400"></i>
                    </div>
                    <span class="font-bold block text-center text-sm">Receive</span>
                </button>
            </div>
        </div>

        <!-- === VIEW: FILE SELECT (Sender Only) === -->
        <div id="view-file" class="hidden p-6 flex-1 flex flex-col">
            <div class="flex items-center gap-2 mb-6">
                <button onclick="showView('view-home')" class="p-2 hover:bg-slate-800 rounded-full"><i data-lucide="arrow-left" class="w-5 h-5"></i></button>
                <h2 class="font-bold">Select File</h2>
            </div>
            
            <div onclick="document.getElementById('fileInput').click()" class="flex-1 border-2 border-dashed border-slate-700 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:bg-slate-800/30 hover:border-cyan-500/50 transition-all group p-8">
                <input type="file" id="fileInput" class="hidden" onchange="handleFile(this)">
                <div class="w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                    <i data-lucide="file-plus" class="w-8 h-8 text-slate-400 group-hover:text-cyan-400"></i>
                </div>
                <p id="fileName" class="text-sm text-slate-400 font-medium text-center break-all">Tap to browse</p>
                <p id="fileSize" class="text-xs text-slate-600 mt-1">-</p>
            </div>

            <button id="btn-gen-offer" disabled onclick="generateOffer()" class="mt-6 w-full py-4 rounded-xl font-bold bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed text-white transition-colors shadow-lg shadow-cyan-900/20">
                Generate Signal
            </button>
        </div>

        <!-- === VIEW: SIGNAL EXCHANGE (QR & Scanner) === -->
        <div id="view-signal" class="hidden p-0 flex-1 flex flex-col h-full">
            <!-- Top Bar -->
            <div class="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900/80">
                <span id="step-badge" class="px-2 py-1 rounded text-[10px] font-bold bg-cyan-900 text-cyan-400 uppercase tracking-wider">Step 1/2</span>
                <button onclick="location.reload()" class="text-xs text-red-400 hover:text-white">Cancel</button>
            </div>

            <!-- Content Area -->
            <div class="flex-1 relative flex flex-col">
                
                <!-- STATE: GENERATING -->
                <div id="signal-loading" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-slate-900 z-20">
                    <div class="w-10 h-10 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-4"></div>
                    <p class="text-cyan-400 text-xs font-mono animate-pulse">Gathering ICE Candidates...</p>
                </div>

                <!-- STATE: DISPLAYING QR (The Offer/Answer) -->
                <div id="signal-display" class="hidden flex-1 flex flex-col items-center justify-center p-6 bg-slate-900">
                    <h3 class="text-white font-bold mb-2 text-center" id="qr-instruction">Scan this on other device</h3>
                    <div class="bg-white p-1 rounded-xl shadow-2xl shadow-cyan-900/20">
                        <canvas id="qr-canvas"></canvas>
                    </div>
                    
                    <!-- Animation Controls -->
                    <div class="mt-4 flex flex-col items-center w-full max-w-[200px]">
                        <div class="flex justify-between w-full text-[10px] text-slate-500 font-mono mb-1">
                            <span>CHUNK</span>
                            <span id="chunk-counter">1/1</span>
                        </div>
                        <div class="w-full h-1 bg-slate-800 rounded-full overflow-hidden">
                            <div id="chunk-progress" class="h-full bg-cyan-500 transition-all duration-100 w-0"></div>
                        </div>
                        <p class="text-[10px] text-slate-600 mt-2 text-center">
                            Keep scanner steady.<br>Codes cycle automatically.
                        </p>
                    </div>

                    <button onclick="enableScannerMode()" class="mt-auto w-full py-3 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs font-bold text-white border border-slate-700">
                        I've scanned it. Open My Scanner.
                    </button>
                </div>

                <!-- STATE: SCANNING (The Camera) -->
                <div id="signal-scanner" class="hidden absolute inset-0 bg-black flex flex-col">
                    <div class="relative flex-1 overflow-hidden">
                        <video id="scan-video" class="absolute inset-0 w-full h-full object-cover" playsinline muted></video>
                        <canvas id="scan-canvas" class="hidden"></canvas>
                        
                        <!-- Overlay -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-64 h-64 border-2 border-cyan-400/50 rounded-lg relative bg-black/10 backdrop-blur-[1px]">
                                <div class="scan-line"></div>
                                <div class="absolute -top-1 -left-1 w-4 h-4 border-t-4 border-l-4 border-cyan-400"></div>
                                <div class="absolute -top-1 -right-1 w-4 h-4 border-t-4 border-r-4 border-cyan-400"></div>
                                <div class="absolute -bottom-1 -left-1 w-4 h-4 border-b-4 border-l-4 border-cyan-400"></div>
                                <div class="absolute -bottom-1 -right-1 w-4 h-4 border-b-4 border-r-4 border-cyan-400"></div>
                            </div>
                        </div>

                        <!-- Scan Stats -->
                        <div class="absolute top-4 left-0 right-0 flex justify-center">
                            <div class="bg-black/60 backdrop-blur-md px-4 py-2 rounded-full text-xs font-mono text-cyan-400 border border-cyan-900/50">
                                <span id="scan-status">Searching...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-slate-900 border-t border-slate-800">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="text-[10px] font-bold text-slate-500">PROGRESS</div>
                            <div class="flex-1 h-2 bg-slate-800 rounded-full overflow-hidden">
                                <div id="scan-progress-bar" class="h-full bg-green-500 w-0 transition-all duration-300"></div>
                            </div>
                            <div id="scan-progress-text" class="text-[10px] font-mono text-white">0%</div>
                        </div>
                        <button onclick="stopScanner()" class="w-full py-3 bg-slate-800 text-slate-300 text-xs rounded-lg">Cancel Scan</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- === VIEW: TRANSFER PROGRESS === -->
        <div id="view-transfer" class="hidden p-8 flex-1 flex flex-col justify-center items-center">
            <div class="w-24 h-24 rounded-full bg-slate-800/50 flex items-center justify-center mb-6 relative">
                <svg class="w-full h-full absolute inset-0 animate-spin-slow text-slate-700" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="48" fill="none" stroke="currentColor" stroke-width="1" stroke-dasharray="10 10"/>
                </svg>
                <i data-lucide="arrow-right-left" class="w-8 h-8 text-cyan-400 animate-pulse"></i>
            </div>
            
            <h2 class="text-xl font-bold text-white mb-1">Transferring</h2>
            <p id="transfer-filename" class="text-slate-400 text-xs mb-8 max-w-[200px] truncate text-center">filename.ext</p>
            
            <div class="w-full h-4 bg-slate-800 rounded-full overflow-hidden mb-2 border border-slate-700">
                <div id="transfer-bar" class="h-full bg-gradient-to-r from-cyan-500 to-blue-500 w-0 transition-all duration-200"></div>
            </div>
            <div class="flex justify-between w-full text-xs font-mono text-slate-500">
                <span id="transfer-percent">0%</span>
                <span id="transfer-speed">0 KB/s</span>
            </div>
        </div>

        <!-- === VIEW: SUCCESS === -->
        <div id="view-success" class="hidden p-8 flex-1 flex flex-col justify-center items-center text-center">
            <div class="w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mb-4 border border-green-500/30">
                <i data-lucide="check" class="w-10 h-10 text-green-400"></i>
            </div>
            <h2 class="text-2xl font-bold text-white mb-2">Done!</h2>
            <p class="text-slate-400 text-sm mb-6">File transfer complete.</p>
            
            <a id="download-btn" class="hidden w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 mb-3">
                <i data-lucide="save" class="w-4 h-4"></i> Download File
            </a>
            
            <button onclick="location.reload()" class="text-slate-500 hover:text-white text-xs mt-4">Send Another</button>
        </div>

    </main>

    <footer class="mt-6 text-slate-600 text-[10px] text-center max-w-xs">
        Data flows directly between devices.<br>No server. Compressed & Chunked QR signaling.
    </footer>

    <script>
        // --- CONFIG & STATE ---
        lucide.createIcons();
        
        const PROTOCOL = {
            CHUNK_SIZE: 150,    // Characters per QR (Low density for easy scanning)
            QR_SPEED: 250,      // ms per frame
            PREFIX: 'V2'        // Protocol identifier
        };

        const STATE = {
            role: null,         // 'sender' | 'receiver'
            pc: null,           // RTCPeerConnection
            dc: null,           // DataChannel
            file: null,         // File object (Sender)
            chunks: [],         // Received file chunks
            bytesReceived: 0,
            meta: null,         // File metadata
            animationInterval: null,
            scanStream: null,
            receivedSignalChunks: new Set(), // Track which QR parts we have
            totalSignalChunks: 0,
            qrInstance: null    // QRious instance
        };

        const ICE_SERVERS = { iceServers: [{ urls: 'stun:stun.l.google.com:19302' }] };

        // --- UI NAVIGATION ---
        function showView(id) {
            document.querySelectorAll('main > div').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function formatBytes(bytes) {
            if (!bytes) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // --- INIT ROLES ---
        function startSender() {
            STATE.role = 'sender';
            showView('view-file');
        }

        function startReceiver() {
            STATE.role = 'receiver';
            initPeerConnection();
            // Receivers scan first (to get the offer)
            showView('view-signal');
            document.getElementById('step-badge').innerText = "SCAN SENDER";
            enableScannerMode(); 
        }

        function handleFile(input) {
            if (input.files.length) {
                STATE.file = input.files[0];
                document.getElementById('fileName').innerText = STATE.file.name;
                document.getElementById('fileName').classList.add('text-cyan-400');
                document.getElementById('fileSize').innerText = formatBytes(STATE.file.size);
                document.getElementById('btn-gen-offer').disabled = false;
            }
        }

        // --- WEBRTC SIGNALING LOGIC ---

        function initPeerConnection() {
            STATE.pc = new RTCPeerConnection(ICE_SERVERS);
            
            STATE.pc.onicecandidate = e => {
                if (!e.candidate) {
                    // ICE Gathering Complete -> We have the full SDP
                    const sdp = JSON.stringify(STATE.pc.localDescription);
                    displayAnimatedQR(sdp);
                }
            };

            STATE.pc.ondatachannel = e => setupDataChannel(e.channel); // Receiver side
        }

        async function generateOffer() {
            showView('view-signal');
            document.getElementById('signal-loading').classList.remove('hidden');
            
            initPeerConnection();
            STATE.dc = STATE.pc.createDataChannel("file");
            setupDataChannel(STATE.dc);

            const offer = await STATE.pc.createOffer();
            await STATE.pc.setLocalDescription(offer);
            // Wait for ICE candidate (null) to trigger displayAnimatedQR
        }

        // --- QR GENERATION (ANIMATED) ---

        function displayAnimatedQR(dataString) {
            // 1. Compress
            const compressed = LZString.compressToBase64(dataString);
            
            // 2. Chunk
            const chunks = [];
            const total = Math.ceil(compressed.length / PROTOCOL.CHUNK_SIZE);
            
            for (let i = 0; i < total; i++) {
                // Protocol: V2|Index|Total|Data
                const slice = compressed.slice(i * PROTOCOL.CHUNK_SIZE, (i + 1) * PROTOCOL.CHUNK_SIZE);
                chunks.push(`${PROTOCOL.PREFIX}|${i}|${total}|${slice}`);
            }

            // 3. UI Setup
            document.getElementById('signal-loading').classList.add('hidden');
            document.getElementById('signal-display').classList.remove('hidden');
            document.getElementById('qr-instruction').innerText = 
                STATE.role === 'sender' ? "Ask Receiver to scan this" : "Ask Sender to scan this";

            // 4. Init QRious Instance (Once)
            if (!STATE.qrInstance) {
                STATE.qrInstance = new QRious({
                    element: document.getElementById('qr-canvas'),
                    size: 200,
                    level: 'L'
                });
            }

            // 5. Animation Loop
            let currentFrame = 0;
            const counter = document.getElementById('chunk-counter');
            const progress = document.getElementById('chunk-progress');
            
            if (STATE.animationInterval) clearInterval(STATE.animationInterval);

            // Function to render one frame
            const renderFrame = () => {
                // Update existing canvas instead of creating new DOM elements
                STATE.qrInstance.value = chunks[currentFrame];
                
                counter.innerText = `${currentFrame + 1}/${total}`;
                progress.style.width = `${((currentFrame+1)/total)*100}%`;
                
                currentFrame = (currentFrame + 1) % total;
            };

            renderFrame(); // Render first immediately
            if (chunks.length > 1) {
                STATE.animationInterval = setInterval(renderFrame, PROTOCOL.QR_SPEED);
            }
        }

        // --- QR SCANNER LOGIC ---

        async function enableScannerMode() {
            document.getElementById('signal-display').classList.add('hidden');
            document.getElementById('signal-scanner').classList.remove('hidden');
            
            // Reset Chunk State
            STATE.receivedSignalChunks.clear();
            STATE.totalSignalChunks = 0;
            updateScanProgress();

            const video = document.getElementById('scan-video');
            const canvas = document.getElementById('scan-canvas');
            const ctx = canvas.getContext('2d');
            const status = document.getElementById('scan-status');

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
                STATE.scanStream = stream;
                video.srcObject = stream;
                video.setAttribute("playsinline", true);
                video.play();
                
                requestAnimationFrame(tick);
            } catch (err) {
                alert("Camera access denied. Ensure you are on HTTPS.");
                stopScanner();
            }

            function tick() {
                if (video.readyState === video.HAVE_ENOUGH_DATA) {
                    canvas.height = video.videoHeight;
                    canvas.width = video.videoWidth;
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const code = jsQR(imageData.data, imageData.width, imageData.height, { inversionAttempts: "dontInvert" });

                    if (code && code.data.startsWith(PROTOCOL.PREFIX)) {
                        handleScannedData(code.data);
                        status.innerText = "Capturing data...";
                        status.classList.add("text-green-400");
                    } else {
                        status.innerText = "Searching...";
                        status.classList.remove("text-green-400");
                    }
                }
                if (STATE.scanStream) requestAnimationFrame(tick);
            }
        }

        function stopScanner() {
            if (STATE.scanStream) {
                STATE.scanStream.getTracks().forEach(t => t.stop());
                STATE.scanStream = null;
            }
            document.getElementById('signal-scanner').classList.add('hidden');
            document.getElementById('signal-display').classList.remove('hidden');
        }

        async function handleScannedData(raw) {
            // Format: V2|Index|Total|Data
            const parts = raw.split('|');
            if (parts.length !== 4) return;

            const index = parseInt(parts[1]);
            const total = parseInt(parts[2]);
            const data = parts[3];

            if (STATE.totalSignalChunks === 0) STATE.totalSignalChunks = total;
            
            // Store data if new
            if (!STATE.receivedSignalChunks.has(index)) {
                STATE.receivedSignalChunks.add({ index, data }); // Store object to sort later
                updateScanProgress();
                
                // Vibrate for feedback
                if (navigator.vibrate) navigator.vibrate(50);
            }

            // Check completion
            if (STATE.receivedSignalChunks.size === total) {
                stopScanner();
                
                // Reassemble
                const sorted = Array.from(STATE.receivedSignalChunks)
                    .sort((a, b) => a.index - b.index)
                    .map(item => item.data)
                    .join('');
                
                const decompressed = LZString.decompressFromBase64(sorted);
                const signal = JSON.parse(decompressed);

                processSignal(signal);
            }
        }

        function updateScanProgress() {
            const current = STATE.receivedSignalChunks.size;
            const total = STATE.totalSignalChunks || 1; // avoid div/0
            const pct = Math.round((current / total) * 100);
            
            document.getElementById('scan-progress-bar').style.width = `${pct}%`;
            document.getElementById('scan-progress-text').innerText = `${current}/${total} CHUNKS`;
        }

        async function processSignal(signal) {
            await STATE.pc.setRemoteDescription(signal);

            if (signal.type === 'offer') {
                // If we scanned an offer, we must generate an answer
                document.getElementById('step-badge').innerText = "STEP 2/2: SHARE REPLY";
                const answer = await STATE.pc.createAnswer();
                await STATE.pc.setLocalDescription(answer);
                // ICE gathering will trigger displayAnimatedQR with the answer
                
            } else if (signal.type === 'answer') {
                // Sender scanned the answer -> Connection should open
                document.getElementById('signal-display').innerHTML = `
                    <div class="text-center animate-pulse">
                        <h3 class="text-white font-bold">Connecting...</h3>
                        <p class="text-slate-500 text-xs">Finalizing P2P Link</p>
                    </div>
                `;
            }
        }

        // --- FILE TRANSFER LOGIC ---

        function setupDataChannel(dc) {
            dc.onopen = () => {
                showView('view-transfer');
                if (STATE.role === 'sender') sendFile();
            };
            dc.onmessage = handleDataMessage;
        }

        function sendFile() {
            const dc = STATE.dc;
            const file = STATE.file;
            
            // Send Meta
            dc.send(JSON.stringify({
                type: 'meta',
                name: file.name,
                size: file.size,
                mime: file.type
            }));

            // Send Data
            const chunkSize = 16 * 1024; // 16KB
            let offset = 0;
            
            document.getElementById('transfer-filename').innerText = `Sending: ${file.name}`;

            const reader = new FileReader();
            reader.onload = e => {
                dc.send(e.target.result);
                offset += e.target.result.byteLength;
                updateTransferProgress(offset, file.size);
                
                if (offset < file.size) {
                    readSlice(offset);
                }
            };

            const readSlice = o => {
                const slice = file.slice(o, o + chunkSize);
                reader.readAsArrayBuffer(slice);
            };
            readSlice(0);
        }

        function handleDataMessage(e) {
            const data = e.data;
            
            if (typeof data === 'string') {
                const msg = JSON.parse(data);
                if (msg.type === 'meta') {
                    STATE.meta = msg;
                    STATE.chunks = [];
                    STATE.bytesReceived = 0;
                    document.getElementById('transfer-filename').innerText = `Receiving: ${msg.name}`;
                }
            } else {
                // ArrayBuffer
                STATE.chunks.push(data);
                STATE.bytesReceived += data.byteLength;
                updateTransferProgress(STATE.bytesReceived, STATE.meta.size);

                if (STATE.bytesReceived >= STATE.meta.size) {
                    saveFile();
                }
            }
        }

        function updateTransferProgress(current, total) {
            const pct = Math.round((current / total) * 100);
            document.getElementById('transfer-bar').style.width = `${pct}%`;
            document.getElementById('transfer-percent').innerText = `${pct}%`;
            // Note: Accurate speed requires timestamps, simplified here
        }

        function saveFile() {
            const blob = new Blob(STATE.chunks, { type: STATE.meta.mime });
            const url = URL.createObjectURL(blob);
            
            showView('view-success');
            const btn = document.getElementById('download-btn');
            btn.href = url;
            btn.download = STATE.meta.name;
            btn.classList.remove('hidden');
        }

    </script>
</body>
</html>
